{"ast":null,"code":"import _classCallCheck from \"/Users/Lily/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Lily/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Lily/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Lily/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Lily/Desktop/frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Lily/Desktop/frontend/src/UserInfo.jsx\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nvar UserInfo =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserInfo, _Component);\n\n  function UserInfo() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, UserInfo);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(UserInfo)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      username: \"\",\n      email: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(UserInfo, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(sessionStorage.getItem(\"token\"));\n      var headers = new Headers({\n        \"Authorization\": \"Token \".concat(sessionStorage.getItem(\"token\"))\n      });\n      fetch(\"http://127.0.0.1:8000/api/users/\".concat(sessionStorage.getItem('user_id'), \"/info\"), {\n        method: \"get\",\n        headers: headers\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        console.log(response);\n\n        _this2.setState({\n          username: response.username\n        });\n\n        _this2.setState({\n          email: response.email\n        });\n      });\n    }\n  }, {\n    key: \"onModify\",\n    value: function onModify() {\n      return function () {\n        console.log(\"modifying user email: \", sessionStorage.getItem('user_id'));\n        window.location.href = \"/users/\".concat(sessionStorage.getItem('user_id'), \"/changeEmail\");\n      };\n    }\n  }, {\n    key: \"onDelete\",\n    value: function onDelete() {\n      var _this3 = this;\n\n      return function () {\n        console.log(\"deleting\");\n        var headers = new Headers({\n          \"Authorization\": \"Token \".concat(sessionStorage.getItem(\"token\"))\n        });\n        var formData = new FormData();\n        formData.append(\"username\", _this3.state.username);\n        fetch(\"http://127.0.0.1:8000/api/users/\".concat(sessionStorage.getItem('user_id'), \"/delete\"), {\n          method: \"delete\",\n          mode: \"cors\",\n          headers: headers,\n          body: formData\n        }).then(function (response) {\n          return response.json();\n        }).then(function (response) {\n          return console.log(response);\n        });\n        window.location.href = \"/login\";\n      };\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      console.log(\"User Info\");\n      console.log(this.state);\n      return React.createElement(\"fieldset\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/alerts\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, \"Back to Alerts\")), React.createElement(\"legend\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \" Account Info\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, \" Username: \", this.state.username), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \" Email: \", this.state.email), React.createElement(\"button\", {\n        type: \"submit\",\n        onClick: this.onModify(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Change Email\"), React.createElement(\"button\", {\n        type: \"submit\",\n        onClick: this.onDelete(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      }, \"Delete Account\")));\n    }\n  }]);\n\n  return UserInfo;\n}(Component);\n\nexport default UserInfo;","map":{"version":3,"sources":["/Users/Lily/Desktop/frontend/src/UserInfo.jsx"],"names":["React","Component","Link","UserInfo","state","username","email","console","log","sessionStorage","getItem","headers","Headers","fetch","method","then","response","json","setState","window","location","href","formData","FormData","append","mode","body","onModify","onDelete"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport {Link} from \"react-router-dom\";\n\nclass UserInfo extends Component {\n\tstate = {\n\t\tusername: \"\",\n\t\temail: \"\"\n\t}\n\n\tcomponentDidMount() {\n\t\tconsole.log(sessionStorage.getItem(\"token\"))\n\t\tconst headers = new Headers({\n\t\t\t\"Authorization\": `Token ${sessionStorage.getItem(\"token\")}`\n\t\t});\n\t\tfetch(`http://127.0.0.1:8000/api/users/${sessionStorage.getItem('user_id')}/info`,\n\t\t{\n\t\t\tmethod: \"get\",\n\t\t\theaders})\n\t\t\t.then(response => response.json())\n\t\t\t.then(response => {\n\t\t\t\tconsole.log(response);\n\t\t\t\tthis.setState({username: response.username})\n\t\t\t\tthis.setState({email: response.email})\n\t\t\t})\n\n\t\t}\n\n\tonModify() {\n\t\treturn () => {\n\t\t\tconsole.log(\"modifying user email: \", sessionStorage.getItem('user_id'));\n\t\t\twindow.location.href= `/users/${sessionStorage.getItem('user_id')}/changeEmail`\n\t\t};\n\t}\n\n\tonDelete() {\n\t\treturn () => {\n\t\t\tconsole.log(\"deleting\")\n\t\t\tconst headers = new Headers({\n\t\t\t\t\"Authorization\": `Token ${sessionStorage.getItem(\"token\")}`\n\t\t\t});\n\t\t\tlet formData = new FormData();\n\t\t\tformData.append(\"username\", this.state.username)\n\t\t\tfetch(`http://127.0.0.1:8000/api/users/${sessionStorage.getItem('user_id')}/delete`,\n\t\t\t{\n\t\t\t\tmethod: \"delete\",\n\t\t\t\tmode: \"cors\",\n\t\t\t\theaders,\n\t\t\t\tbody: formData})\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(response => console.log(response))\n\t\t\t\twindow.location.href=`/login`;\n\t\t}\n\t}\n\n\trender() {\n\t\tconsole.log(\"User Info\");\n\t\tconsole.log(this.state)\n\t\treturn (\n\t\t\t<fieldset>\n\t\t\t\t<div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Link to=\"/alerts\">Back to Alerts</Link>\n\t\t\t\t\t</div>\n\t\t\t\t\t<legend> Account Info</legend>\n\t\t\t\t\t<p> Username: {this.state.username}</p>\n\t\t\t\t\t<p> Email: {this.state.email}</p>\n\t\t\t\t\t<button type=\"submit\" onClick={this.onModify()}>Change Email</button>\n\t\t\t\t\t<button type=\"submit\" onClick={this.onDelete()}>Delete Account</button>\n\t\t\t\t</div>\n\t\t\t</fieldset>\n\t\t\t)\n\t}\n}\nexport default UserInfo"]},"metadata":{},"sourceType":"module"}